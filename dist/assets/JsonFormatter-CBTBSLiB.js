import{_ as m,c as u,a as t,b as J,f as r,w as p,v as f,n as d,t as c,o as h}from"./index-Bk7H134H.js";const v={data(){return{inputJson:"",formattedJson:"",validationMessage:"",validationStatus:!1,copySuccess:!1,toast:{show:!1,message:"",type:"success",icon:"mdi-check-circle"}}},computed:{highlightedJson(){return this.formattedJson?this.formattedJson.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,o=>{let s="json-number";return/^"/.test(o)?/:$/.test(o)?s="json-key":s="json-string":/true|false/.test(o)?s="json-boolean":/null/.test(o)&&(s="json-null"),`<span class="${s}">${o}</span>`}):""}},methods:{showToast(o,s="success"){this.toast.message=o,this.toast.type=s,this.toast.icon=s==="success"?"mdi-check-circle":"mdi-alert-circle",this.toast.show=!0,setTimeout(()=>{this.toast.show=!1},3e3)},validateJson(o){try{return o.trim()?(JSON.parse(o),this.validationMessage="有效的 JSON 格式",this.validationStatus=!0,!0):(this.validationMessage="",this.validationStatus=!1,!1)}catch(s){return this.validationMessage=`无效的 JSON: ${s.message}`,this.validationStatus=!1,!1}},validateJsonOnType(){if(this.inputJson.trim()){if(this.validateJson(this.inputJson))try{const s=JSON.parse(this.inputJson);this.formattedJson=JSON.stringify(s,null,2)}catch{}}else this.validationMessage="",this.formattedJson=""},formatJson(){if(this.validateJson(this.inputJson)){const o=JSON.parse(this.inputJson);this.formattedJson=JSON.stringify(o,null,2),this.showToast("JSON 格式化成功")}else this.inputJson.trim()?this.showToast("JSON 格式无效，请检查输入","error"):this.formattedJson=""},compressJson(){if(this.validateJson(this.inputJson)){const o=JSON.parse(this.inputJson);this.formattedJson=JSON.stringify(o),this.showToast("JSON 压缩成功")}else this.showToast("JSON 格式无效，请检查输入","error")},async copyResult(){try{if(!this.formattedJson){this.showToast("没有可复制的内容","error");return}await navigator.clipboard.writeText(this.formattedJson),this.copySuccess=!0,this.showToast("已复制到剪贴板"),setTimeout(()=>{this.copySuccess=!1},2e3)}catch{this.showToast("复制失败","error")}},clearInput(){this.inputJson="",this.validationMessage="",this.formattedJson="",this.showToast("输入已清空")},async pasteFromClipboard(){try{const o=await navigator.clipboard.readText();if(this.inputJson=o,o.trim())if(this.validateJson(o)){const a=JSON.parse(o);this.formattedJson=JSON.stringify(a,null,2),this.showToast("JSON 已自动格式化")}else this.showToast("JSON 格式无效，请检查输入","error")}catch{this.showToast("无法从剪贴板读取内容","error")}},downloadJson(){if(!this.formattedJson){this.showToast("没有可下载的内容","error");return}const o=new Blob([this.formattedJson],{type:"application/json"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download="formatted_json.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),this.showToast("JSON 文件已下载")},validateJsonOnly(){if(!this.inputJson.trim()){this.showToast("请先输入JSON数据","error");return}this.validateJson(this.inputJson)?this.showToast("JSON 格式有效"):this.showToast("JSON 格式无效，请检查输入","error")},sortJson(){if(!this.validateJson(this.inputJson)){this.showToast("JSON 格式无效，无法排序","error");return}try{const o=JSON.parse(this.inputJson),s=l=>{if(l===null||typeof l!="object")return l;if(Array.isArray(l))return l.map(i=>s(i));const n={};return Object.keys(l).sort().forEach(i=>{n[i]=s(l[i])}),n},a=s(o);this.formattedJson=JSON.stringify(a,null,2),this.showToast("JSON 已排序")}catch(o){this.showToast(`排序失败: ${o.message}`,"error")}}}},O={class:"formatter"},S={class:"formatter-actions"},b={class:"formatter-content"},y={class:"input-panel"},w={class:"panel-header"},N={class:"input-actions"},T={key:0,class:"validation-message"},g={class:"output-panel"},k={class:"panel-header"},j={class:"output-actions"},C=["innerHTML"],x={key:0,class:"toast-container"};function M(o,s,a,l,n,i){return h(),u("div",O,[s[19]||(s[19]=t("div",{class:"formatter-header"},[t("h1",null,"JSON 格式化工具"),t("p",null,"粘贴、验证、格式化和压缩 JSON 数据")],-1)),t("div",S,[t("button",{class:"main-btn",onClick:s[0]||(s[0]=(...e)=>i.formatJson&&i.formatJson(...e))},s[10]||(s[10]=[t("i",{class:"mdi mdi-code-json"},null,-1),r(" 格式化 ")])),t("button",{class:"main-btn",onClick:s[1]||(s[1]=(...e)=>i.compressJson&&i.compressJson(...e))},s[11]||(s[11]=[t("i",{class:"mdi mdi-arrow-collapse-horizontal"},null,-1),r(" 压缩 ")])),t("button",{class:"main-btn",onClick:s[2]||(s[2]=(...e)=>i.validateJsonOnly&&i.validateJsonOnly(...e))},s[12]||(s[12]=[t("i",{class:"mdi mdi-check-circle-outline"},null,-1),r(" 验证 ")])),t("button",{class:"main-btn",onClick:s[3]||(s[3]=(...e)=>i.sortJson&&i.sortJson(...e))},s[13]||(s[13]=[t("i",{class:"mdi mdi-sort-alphabetical-ascending"},null,-1),r(" 排序 ")]))]),t("div",b,[t("div",y,[t("div",w,[s[16]||(s[16]=t("h3",null,"输入 JSON",-1)),t("div",N,[t("button",{class:"action-btn",onClick:s[4]||(s[4]=(...e)=>i.clearInput&&i.clearInput(...e)),title:"清空输入"},s[14]||(s[14]=[t("i",{class:"mdi mdi-delete-outline"},null,-1),t("span",null,"清空",-1)])),t("button",{class:"action-btn",onClick:s[5]||(s[5]=(...e)=>i.pasteFromClipboard&&i.pasteFromClipboard(...e)),title:"从剪贴板粘贴"},s[15]||(s[15]=[t("i",{class:"mdi mdi-clipboard-text-outline"},null,-1),t("span",null,"粘贴",-1)]))])]),p(t("textarea",{"onUpdate:modelValue":s[6]||(s[6]=e=>n.inputJson=e),placeholder:"请输入 JSON 字符串",class:"json-input",onInput:s[7]||(s[7]=(...e)=>i.validateJsonOnType&&i.validateJsonOnType(...e))},null,544),[[f,n.inputJson]]),n.validationMessage?(h(),u("div",T,[t("i",{class:d(["mdi",n.validationStatus?"mdi-check-circle text-success":"mdi-alert-circle text-error"])},null,2),r(" "+c(n.validationMessage),1)])):J("",!0)]),t("div",g,[t("div",k,[s[18]||(s[18]=t("h3",null,"格式化结果",-1)),t("div",j,[t("button",{class:"action-btn",onClick:s[8]||(s[8]=(...e)=>i.downloadJson&&i.downloadJson(...e)),title:"下载 JSON"},s[17]||(s[17]=[t("i",{class:"mdi mdi-download-outline"},null,-1),t("span",null,"下载",-1)])),t("button",{class:"action-btn",onClick:s[9]||(s[9]=(...e)=>i.copyResult&&i.copyResult(...e)),title:"复制结果"},[t("i",{class:d(["mdi",n.copySuccess?"mdi-check":"mdi-content-copy"])},null,2),t("span",null,c(n.copySuccess?"已复制":"复制"),1)])])]),t("pre",{class:"json-output",innerHTML:i.highlightedJson},null,8,C)])]),n.toast.show?(h(),u("div",x,[t("div",{class:d(["toast",n.toast.type])},[t("i",{class:d(["mdi",n.toast.icon])},null,2),t("span",null,c(n.toast.message),1)],2)])):J("",!0)])}const R=m(v,[["render",M],["__scopeId","data-v-85a8b0ad"]]);export{R as default};
